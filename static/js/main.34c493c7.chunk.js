(window["webpackJsonpnuclear-monitor"]=window["webpackJsonpnuclear-monitor"]||[]).push([[0],{126:function(e,t,r){e.exports=r(201)},131:function(e,t,r){},201:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(14),c=r.n(o),u=(r(131),r(26)),i=r(84),l=r(33),s=r(111),p=r(112),d=r(4),f=r(206),O=r(210),b=r(203),m=r(35),h=r.n(m),y=r(63),v="https://nuclear-monitor-backend.herokuapp.com/";function g(){return(g=Object(y.a)(h.a.mark(function e(){var t,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,200)});case 2:return e.next=4,fetch("".concat(v,"/plants"));case 4:return t=e.sent,e.next=7,t.json();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(y.a)(h.a.mark(function e(){var t,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/reactors"));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(){return(E=Object(y.a)(h.a.mark(function e(){var t,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/productions"));case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach(function(t){Object(d.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var D="PLANTS_LOAD_ACTION",k="PLANTS_RECEIVE_ACTION";function C(e){var t=e.data,r=e.errors;return{type:k,data:t,errors:r}}var x={loading:!1,loaded:!1,errors:null,data:{}};function N(e){return e.plants.loaded}function I(e){return Object(b.a)(e.plants.data)}function _(e,t){return t.plants.data[e]}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return P({},e,{loading:!0});case k:return P({},e,{loading:!1,loaded:!t.errors,errors:t.errors||null,data:t.data||{}});default:return e}};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(r,!0).forEach(function(t){Object(d.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var T="REACTORS_LOAD_ACTION",L="REACTORS_RECEIVE_ACTION";function M(e){var t=e.data,r=e.errors;return{type:L,data:t,errors:r}}var V={loading:!1,loaded:!1,errors:null,data:{}};function H(e){return e.reactors.loaded}var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return S({},e,{loading:!0});case L:return S({},e,{loading:!1,loaded:!t.errors,errors:t.errors||null,data:t.data||{}});default:return e}};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach(function(t){Object(d.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var U="PRODUCTIONS_LOAD_ACTION",B="PRODUCTIONS_RECEIVE_ACTION";function J(e){var t=e.data,r=e.errors;return{type:B,data:t,errors:r}}var $={loading:!1,loaded:!1,errors:null,data:{}};function F(e){return e.productions.loaded}function G(e,t){return t.productions.data[e].values.pop()}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return W({},e,{loading:!0});case B:return W({},e,{loading:!1,loaded:!t.errors,errors:t.errors||null,data:t.data||{}});default:return e}},Q=Object(l.combineReducers)({plants:A,reactors:q,productions:K}),X=[Object(l.applyMiddleware)(p.a)],Y=Object(s.composeWithDevTools)({}).apply(void 0,X),Z=Object(l.createStore)(Q,Y),ee=(r(137),r(115)),te=(r(67),r(44)),re=(r(68),r(45)),ne=(r(140),r(91)),ae=(r(142),r(121)),oe=r(27),ce=r(208),ue=r(209),ie=r(211),le=r(205);var se=function(){return a.a.createElement("div",{className:"MixView"},a.a.createElement(te.a,null,a.a.createElement(re.a,{span:24},a.a.createElement("div",null,"MixView"))))},pe=r(1),de=r.n(pe),fe=(de.a.shape({id:de.a.string.isRequired,name:de.a.string.isRequired,coords:de.a.arrayOf(de.a.number).isRequired,reactors:de.a.arrayOf(de.a.string).isRequired}),"70px"),Oe="50px";var be=function(e){var t=e.power,r=e.load,n=r<0?0:r,o=Math.floor(n/t*100);return a.a.createElement("span",{className:"ReactIndicator",style:{height:fe,width:Oe,background:"linear-gradient(0deg, rgba(9,121,23,1) 0%, rgba(9,121,23,1) ".concat(o,"%, rgba(255,255,255,1) ").concat(o,"%)")}},a.a.createElement("span",{className:"ReactIndicator__label"},n))};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var he=Object(u.b)(function(e,t){var r=t.match.params.plantId,n=function(e,t){return Object.values(t.reactors.data).filter(function(t){return t.plantId===e})}(r,e).map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(r,!0).forEach(function(t){Object(d.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{actualProd:G(t.eicCode,e).value})});return{plant:_(r,e),reactors:n}})(function(e){var t=e.plant,r=e.reactors;return a.a.createElement("div",{className:"PlantView"},a.a.createElement(te.a,null,a.a.createElement(re.a,{span:24},a.a.createElement("h2",null,t.name),a.a.createElement("div",null,"".concat(t.reactors.length," r\xe9acteur").concat(t.reactors.length>1?"s":"")),a.a.createElement("div",null,r.map(function(e){return a.a.createElement(be,{key:e.eicCode,power:e.power_MW,load:e.actualProd})})))))}),ye=r(87),ve=r(113),ge=r(58),je=r(123),Ee=r(114),we=r(122),Pe=r(204),De=r(207),ke=function(e){function t(){return Object(ve.a)(this,t),Object(je.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(we.a)(t,e),Object(ge.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.load)(Object(ye.a)(e,["load"]))}},{key:"componentDidUpdate",value:function(e){var t=Object(Pe.a)(["load"],e),r=this.props,n=r.load,a=Object(ye.a)(r,["load"]);Object(De.a)(t,a)||n(a)}},{key:"render",value:function(){return null}}]),t}(n.Component);var Ce=function(e){return Object(u.b)(null,{load:e})(ke)},xe=Ce(function(){return function(e){return e({type:D}),function(){return g.apply(this,arguments)}().then(function(t){return e(C({data:Object(f.a)(Object(O.a)("id"),t)}))}).catch(function(t){return console.error(t)&&e(C({errors:t}))})}}),Ne=Ce(function(){return function(e){return e({type:T}),function(){return j.apply(this,arguments)}().then(function(t){return e(M({data:Object(f.a)(Object(O.a)("eicCode"),t)}))}).catch(function(t){return console.error(t)&&e(M({errors:t}))})}}),Ie=Ce(function(){return function(e){return e({type:U}),function(){return E.apply(this,arguments)}().then(function(t){return e(J({data:Object(f.a)(Object(O.a)("eicCode"),t)}))}).catch(function(t){return console.error(t)&&e(J({errors:t}))})}}),_e=document.body,Ae=document.documentElement,Re=Math.max(_e.scrollHeight,_e.offsetHeight,Ae.clientHeight,Ae.scrollHeight,Ae.offsetHeight);var Se=Object(oe.g)(Object(u.b)(function(e,t){return{isLoaded:N(e)&&H(e)&&F(e),plants:I(e),goTo:function(e){return t.history.push(e)}}})(function(e){var t=e.isLoaded,r=e.plants,n=e.goTo;return a.a.createElement("div",{className:"AppLayout"},a.a.createElement(xe,null),a.a.createElement(Ne,null),a.a.createElement(Ie,null),a.a.createElement(ee.a,{size:"large",spinning:!t},t&&a.a.createElement(ne.a,null,a.a.createElement(ae.a,{title:"Nuclear Monitor",visible:!0,placement:"left",mask:!1,closable:!1,width:300},a.a.createElement(oe.d,null,a.a.createElement(oe.b,{path:"/",exact:!0,component:se}),a.a.createElement(oe.b,{path:"/plant/:plantId",exact:!0,component:he}),a.a.createElement(oe.b,{component:function(){return a.a.createElement(oe.a,{to:{pathname:"/"}})}}))),a.a.createElement(te.a,null,a.a.createElement(re.a,{span:24},a.a.createElement(ne.a.Content,{className:"AppLayout__content"},a.a.createElement(ce.a,{center:[47.505,2],zoom:6,style:{height:Re},zoomControl:!1},a.a.createElement(ue.a,{position:"topright"}),a.a.createElement(ie.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.map(function(e){return a.a.createElement(le.a,{key:e.id,position:e.coords,onClick:function(){return n("/plant/".concat(e.id))}})}))))))))}));var Te=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(u.a,{store:Z},a.a.createElement(i.a,null,a.a.createElement(Se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[126,1,2]]]);
//# sourceMappingURL=main.34c493c7.chunk.js.map